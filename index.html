<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>HOLD 100K</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
    user-select: none;
    -webkit-user-select: none;
    -webkit-tap-highlight-color: transparent;
}

body {
    margin: 0;
    font-family: system-ui, -apple-system, Arial, sans-serif;
    background: linear-gradient(180deg,#7dd3fc,#e0f2fe);
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    transition: background 0.6s;
}

/* ===== –û–ë–£–ß–ï–ù–ò–ï ===== */
#tutorial {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.88);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    text-align: center;
    padding: 30px;
}
#tutorialBox {
    max-width: 520px;
}
#tutorialBox h2 {
    font-size: 30px;
    margin-bottom: 20px;
}
#tutorialBox p {
    line-height: 1.6;
    opacity: 0.85;
}
#tutorialBox span {
    display: block;
    margin-top: 25px;
    font-size: 14px;
    opacity: 0.6;
}

/* ===== –ò–ì–†–ê ===== */
#seal {
    font-size: 120px;
    margin-bottom: 10px;
}

.breath { animation: breath 2s infinite ease-in-out; }
.angry  { animation: angry 0.35s infinite; }
.happy  { animation: happy 1.5s infinite ease-in-out; }

@keyframes breath {
    0%,100%{transform:scale(1)}
    50%{transform:scale(1.05)}
}
@keyframes angry {
    0%{transform:translateX(0)}
    25%{transform:translateX(-8px)}
    50%{transform:translateX(8px)}
    75%{transform:translateX(-8px)}
    100%{transform:translateX(0)}
}
@keyframes happy {
    0%,100%{transform:rotate(0)}
    50%{transform:rotate(10deg)}
}

#scoreBox {
    background: #000;
    padding: 18px 36px 10px;
    border-radius: 22px;
    font-size: 44px;
    font-weight: bold;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}
#target {
    font-size: 14px;
    opacity: 0.6;
    margin-top: 6px;
}

#attempts {
    margin: 14px 0 22px;
    font-size: 14px;
    opacity: 0.8;
}

#holdBtn {
    width: 300px;
    height: 300px;
    border-radius: 50%;
    background: radial-gradient(circle at top,#ff6b6b,#b91c1c);
    border: none;
    box-shadow:
        0 0 50px rgba(255,0,0,0.7),
        inset 0 -15px 25px rgba(0,0,0,0.4);
    cursor: pointer;
    touch-action: none;
}
#holdBtn:active { transform: scale(0.95); }

/* ===== –°–û–û–ë–©–ï–ù–ò–ï –û–ë –£–°–ü–ï–•–ï ===== */
.success-message {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.95);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    color: white;
    text-align: center;
    padding: 20px;
    display: none;
}

.success-content {
    background: linear-gradient(45deg, #1a5f7a, #0a2e38);
    padding: 40px;
    border-radius: 20px;
    max-width: 600px;
    box-shadow: 0 0 50px rgba(26, 95, 122, 0.7);
    border: 3px solid #ffcc00;
    animation: successPulse 2s infinite;
}

@keyframes successPulse {
    0% { transform: scale(1); box-shadow: 0 0 50px rgba(26, 95, 122, 0.7); }
    50% { transform: scale(1.05); box-shadow: 0 0 70px rgba(26, 95, 122, 0.9); }
    100% { transform: scale(1); box-shadow: 0 0 50px rgba(26, 95, 122, 0.7); }
}

.success-title {
    font-size: 36px;
    margin-bottom: 20px;
    color: #ffcc00;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

.success-text {
    font-size: 24px;
    margin-bottom: 30px;
    color: #fff;
}

.continue-button {
    background: #ffcc00;
    color: #000;
    border: none;
    padding: 15px 30px;
    font-size: 20px;
    font-weight: bold;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(255, 204, 0, 0.4);
}

.continue-button:hover {
    background: #ffdd44;
    transform: scale(1.1);
    box-shadow: 0 8px 20px rgba(255, 204, 0, 0.6);
}

.confetti {
    position: fixed;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    z-index: 2001;
    pointer-events: none;
}

/* ===== –≠–ö–†–ê–ù –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù ===== */
#lockedScreen {
    position: fixed;
    inset: 0;
    background: #000;
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 1500;
    display: none;
}

.locked-content {
    text-align: center;
    padding: 40px;
}

.locked-content div:first-child {
    font-size: 120px;
    margin-bottom: 20px;
}
</style>
</head>

<body>

<!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ -->
<div id="successMessage" class="success-message">
    <div class="success-content">
        <h1 class="success-title">üéâ –ü–û–ë–ï–î–ê! üéâ</h1>
        <p class="success-text">–ú–æ–ª–æ–¥–µ—Ü! –¢—ã –ø—Ä–æ—à–µ–ª(-–∞) –º–∏–Ω–∏-–∏–≥—Ä—É ‚Ññ1, –Ω–µ –∑–∞–±—É–¥—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–∫—Ä–∏–Ω –≤ –≥—Ä—É–ø–ø—É!</p>
        <p style="font-size: 20px; margin-bottom: 20px; color: #ffcc00;">100 000 –æ—á–∫–æ–≤ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ!</p>
        <button class="continue-button" onclick="restartGame()">–ò–≥—Ä–∞—Ç—å –µ—â–µ —Ä–∞–∑</button>
    </div>
</div>

<!-- –≠–∫—Ä–∞–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ -->
<div id="lockedScreen">
    <div class="locked-content">
        <div>üîí</div>
        <div style="font-size:24px;margin-top:20px">
            –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞–≤—Å–µ–≥–¥–∞
        </div>
        <div style="font-size:16px;margin-top:15px;opacity:0.7">
            –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏
        </div>
    </div>
</div>

<!-- –û–ë–£–ß–ï–ù–ò–ï -->
<div id="tutorial">
    <div id="tutorialBox">
        <h2>ü¶≠ –ò—Å–ø—ã—Ç–∞–Ω–∏–µ —Ç—é–ª–µ–Ω—è</h2>
        <p>
            –ó–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –∏ –¥–µ—Ä–∂–∏, –ø–æ–∫–∞ —Å—á—ë—Ç –Ω–µ –¥–æ–π–¥—ë—Ç –¥–æ 100 000.<br><br>
            ‚ùå –û—Ç–ø—É—Å—Ç–∏–ª ‚Äî –ø–æ–ø—ã—Ç–∫–∞ –ø–æ—Ç–µ—Ä—è–Ω–∞<br>
            üö´ –í—Å–µ–≥–æ 5 –ø–æ–ø—ã—Ç–æ–∫<br>
            üîí –ü–æ—Å–ª–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–µ—Ç
        </p>
        <span>–ù–∞–∂–º–∏ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å</span>
    </div>
</div>

<!-- –ò–ì–†–ê -->
<div id="seal">ü¶≠</div>

<div id="scoreBox">
    <div id="score">0.0</div>
    <div id="target">/ 100 000</div>
</div>

<div id="attempts"></div>

<button id="holdBtn"></button>

<script>
const TARGET = 100000;
const MAX_ATTEMPTS = 5;

let score = 0;
let interval = null;
let lastTime = null;

let attempts = Number(localStorage.getItem("attempts") ?? 0);
let locked = localStorage.getItem("locked") === "true";

const seal = document.getElementById("seal");
const scoreEl = document.getElementById("score");
const attemptsEl = document.getElementById("attempts");
const btn = document.getElementById("holdBtn");
const tutorial = document.getElementById("tutorial");
const successMessage = document.getElementById("successMessage");
const lockedScreen = document.getElementById("lockedScreen");

/* ===== –û–ë–£–ß–ï–ù–ò–ï (–û–î–ò–ù –†–ê–ó) ===== */
if (localStorage.getItem("tutorialDone") === "true") {
    tutorial.remove();
}
tutorial.addEventListener("click", () => {
    localStorage.setItem("tutorialDone","true");
    tutorial.remove();
});

/* ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===== */
updateAttempts();
if (locked) {
    lockForever();
}

/* ===== –õ–û–ì–ò–ö–ê ===== */
function updateAttempts() {
    attemptsEl.textContent = `–ü–æ–ø—ã—Ç–∫–∏: ${MAX_ATTEMPTS - attempts} / ${MAX_ATTEMPTS}`;
}

function updateTheme() {
    if (score < 20000)
        document.body.style.background = "linear-gradient(180deg,#7dd3fc,#e0f2fe)";
    else if (score < 50000)
        document.body.style.background = "linear-gradient(180deg,#22c55e,#16a34a)";
    else
        document.body.style.background = "linear-gradient(180deg,#ef4444,#7f1d1d)";
}

function startCounting() {
    if (interval || locked) return;

    lastTime = performance.now();
    seal.textContent = "üòêü¶≠";
    seal.className = "breath";

    interval = setInterval(() => {
        const now = performance.now();
        if (now - lastTime > 60) return fail();

        lastTime = now;
        score += 0.1;
        scoreEl.textContent = score.toFixed(1);
        updateTheme();

        if (score >= TARGET) win();
    }, 1);
}

function fail() {
    clearInterval(interval);
    interval = null;

    score = 0;
    scoreEl.textContent = "0.0";

    attempts++;
    localStorage.setItem("attempts", attempts);

    seal.textContent = "üò°ü¶≠";
    seal.className = "angry";
    navigator.vibrate?.([200,100,200]);

    updateAttempts();

    if (attempts >= MAX_ATTEMPTS) {
        lockForever();
    }
}

function win() {
    clearInterval(interval);
    seal.textContent = "üòéü¶≠";
    seal.className = "happy";
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
    showSuccessMessage();
}

function showSuccessMessage() {
    // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–≥—Ä—ã
    document.querySelectorAll('#seal, #scoreBox, #attempts, #holdBtn').forEach(el => {
        el.style.display = 'none';
    });
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
    successMessage.style.display = 'flex';
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    createConfetti();
}

function createConfetti() {
    const colors = ['#ffcc00', '#ff3366', '#33ff66', '#3366ff', '#ff9933', '#ff66cc'];
    
    for(let i = 0; i < 100; i++) {
        const confetti = document.createElement('div');
        confetti.classList.add('confetti');
        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.top = '-10px';
        
        const size = Math.random() * 12 + 6;
        confetti.style.width = size + 'px';
        confetti.style.height = size + 'px';
        
        // –°–ª—É—á–∞–π–Ω–∞—è —Ñ–æ—Ä–º–∞
        if (Math.random() > 0.5) {
            confetti.style.borderRadius = '50%';
        } else {
            confetti.style.borderRadius = '0';
            confetti.style.transform = 'rotate(' + (Math.random() * 360) + 'deg)';
        }
        
        const animation = confetti.animate([
            { 
                transform: `translateY(0) rotate(0deg)`, 
                opacity: 1 
            },
            { 
                transform: `translateY(${window.innerHeight + 100}px) rotate(${Math.random() * 360}deg)`, 
                opacity: 0 
            }
        ], {
            duration: Math.random() * 3000 + 2000,
            easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
        });
        
        document.body.appendChild(confetti);
        
        animation.onfinish = () => {
            confetti.remove();
        };
    }
}

function lockForever() {
    locked = true;
    localStorage.setItem("locked","true");
    
    // –°–∫—Ä—ã–≤–∞–µ–º –∏–≥—Ä–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
    document.querySelectorAll('#seal, #scoreBox, #attempts, #holdBtn').forEach(el => {
        el.style.display = 'none';
    });
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
    lockedScreen.style.display = 'flex';
}

function restartGame() {
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
    localStorage.clear();
    
    // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
    successMessage.style.display = 'none';
    
    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
    location.reload();
}

function stopCounting() {
    if (interval) fail();
}

/* ===== –°–û–ë–´–¢–ò–Ø ===== */
btn.addEventListener("mousedown", startCounting);
btn.addEventListener("mouseup", stopCounting);
btn.addEventListener("mouseleave", stopCounting);
btn.addEventListener("touchstart", startCounting);
btn.addEventListener("touchend", stopCounting);

document.addEventListener("visibilitychange", () => {
    if (document.hidden && interval) fail();
});
window.addEventListener("blur", () => {
    if (interval) fail();
});
</script>

</body>
</html>
