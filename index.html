<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞—Å–ª–µ–Ω–∏—Ü–∞: –∑–∞–≥–∞–¥–∫–∏ –∏ –±–ª–∏–Ω—ã</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
        }
        body {
            background: #fef3e4;
            background-image: radial-gradient(circle at 30% 30%, #ffdab9 0%, #fbc1a0 100%);
            min-height: 100vh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px;
        }
        .pancake-card {
            max-width: 700px;
            width: 100%;
            background: rgba(255, 250, 240, 0.9);
            backdrop-filter: blur(6px);
            border-radius: 60px 60px 40px 40px;
            box-shadow: 0 25px 40px rgba(0, 0, 0, 0.2), 0 0 0 2px #ffdead inset, 0 0 0 5px #fff3e0 inset;
            padding: 24px 28px 36px;
            border: 6px solid #ffa07a;
        }
        .timer-section {
            background: #b22222;
            color: #fff3cd;
            padding: 12px 20px;
            border-radius: 100px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            font-weight: bold;
            font-size: 1.6rem;
            border: 3px solid #ffd700;
            box-shadow: 0 5px 0 #8b0000;
        }
        .timer {
            background: #2e1b0e;
            padding: 8px 24px;
            border-radius: 60px;
            font-family: 'Courier New', monospace;
            letter-spacing: 4px;
            color: #ffeb99;
            text-shadow: 0 0 4px orange;
            font-size: 2.1rem;
        }
        .pancakes-ico {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .pancakes-ico span {
            font-size: 1.9rem;
        }

        .question-box {
            background: #fff3d6;
            border-radius: 80px 80px 40px 40px;
            padding: 30px 20px 20px;
            border: 4px dashed #e67e22;
            margin-bottom: 20px;
        }
        .badge-question {
            background: #e67e22;
            color: white;
            padding: 8px 24px;
            border-radius: 40px;
            display: inline-block;
            font-size: 1.2rem;
            margin-bottom: 20px;
            font-weight: 600;
        }
        .question-text {
            font-size: 1.5rem;
            line-height: 1.3;
            color: #3d1f00;
            margin-bottom: 28px;
            font-weight: 600;
            padding: 0 10px;
        }
        .answer-area {
            background: white;
            border-radius: 50px;
            padding: 5px 15px 5px 25px;
            display: flex;
            align-items: center;
            border: 3px solid #c98f5e;
            margin-bottom: 15px;
        }
        .answer-area input {
            border: none;
            flex: 1;
            font-size: 1.3rem;
            padding: 14px 5px;
            outline: none;
            background: transparent;
            color: #3f280e;
        }
        .save-btn {
            background: #2e8b57;
            color: white;
            border: none;
            width: 58px;
            height: 58px;
            border-radius: 50%;
            font-size: 2.4rem;
            line-height: 1;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.2s;
            border: 3px solid #f9e076;
            box-shadow: 0 4px 0 #1b4d3b;
            margin-right: 5px;
        }
        .save-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }
        .save-btn:disabled {
            opacity: 0.5;
            transform: none;
            pointer-events: none;
            background: #a9a9a9;
            border-color: #ccc;
        }
        .nav-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin: 15px 0 20px;
        }
        .nav-btn {
            background: #ffb347;
            border: none;
            padding: 16px 25px;
            border-radius: 50px;
            font-size: 1.4rem;
            font-weight: bold;
            color: #2c1c0c;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            border: 3px solid #ffe484;
            box-shadow: 0 5px 0 #b16200;
            transition: 0.1s ease;
            flex: 0 1 auto;
            justify-content: center;
        }
        .nav-btn:active {
            transform: translateY(4px);
            box-shadow: 0 1px 0 #b16200;
        }
        .nav-btn:disabled {
            opacity: 0.4;
            transform: none;
            box-shadow: 0 4px 0 #7a4c1a;
            pointer-events: none;
        }
        .arrow {
            font-size: 1.9rem;
        }
        .pagination-info {
            text-align: center;
            font-size: 1.3rem;
            background: #ffdec2;
            border-radius: 40px;
            padding: 8px;
            width: fit-content;
            margin: 10px auto 5px;
        }

        .results-screen {
            background: #fae7cb;
            border-radius: 40px;
            padding: 24px;
            border: 5px solid #d48d54;
        }
        .result-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 25px 0;
        }
        .stat-card {
            background: #f5deb3;
            border-radius: 30px;
            padding: 16px;
            text-align: center;
            border: 2px solid #b5712f;
        }
        .big-number {
            font-size: 3rem;
            font-weight: 800;
            color: #b4450c;
        }
        .pancake-badge {
            background: #d2691e;
            color: white;
            border-radius: 40px;
            padding: 10px 20px;
            font-size: 1.6rem;
            font-weight: bold;
            display: inline-block;
            margin: 5px 0;
        }
        .answers-review {
            background: #ffe6c9;
            border-radius: 24px;
            padding: 15px;
            margin: 20px 0;
            max-height: 260px;
            overflow-y: auto;
        }
        .review-item {
            background: white;
            border-radius: 30px;
            padding: 10px 18px;
            margin-bottom: 8px;
            border-left: 10px solid #cd853f;
        }
        .correct-badge {
            color: #1f7a1f;
            font-weight: bold;
        }
        .wrong-badge {
            color: #a52a2a;
        }
        .restart-btn {
            background: #e67e22;
            color: white;
            border: none;
            font-size: 1.6rem;
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: bold;
            width: 100%;
            cursor: pointer;
            border-bottom: 6px solid #9e4a0e;
        }
        .restart-btn:active {
            transform: translateY(4px);
            border-bottom-width: 2px;
        }
        .footer-pancakes {
            background: #fff0bc;
            border-radius: 40px;
            padding: 16px 20px;
            margin-top: 24px;
            font-size: 1.7rem;
            font-weight: bold;
            text-align: center;
            border: 3px solid #cb7b3b;
        }
        .hidden {
            display: none !important;
        }
        .disabled-btn {
            opacity: 0.5;
        }
        .small-note {
            font-size: 1rem;
            color: #5f3d22;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="pancake-card" id="app">
        <!-- –°–µ–∫—É–Ω–¥–æ–º–µ—Ä –≤—Å–µ–≥–¥–∞ –≤–∏–¥–µ–Ω -->
        <div class="timer-section">
            <div class="pancakes-ico">
                <span>ü•û</span><span>—Å–µ–∫—É–Ω–¥–æ–º–µ—Ä</span>
            </div>
            <div class="timer" id="timerDisplay">00</div>
        </div>

        <!-- –≠–ö–†–ê–ù –í–û–ü–†–û–°–û–í (–≤–∏–¥–µ–Ω –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è) -->
        <div id="quizScreen">
            <div class="question-box">
                <div class="badge-question" id="questionBadge">–ó–∞–≥–∞–¥–∫–∞ <span id="currentIdxSpan">1</span>/7</div>
                <div class="question-text" id="questionText"></div>
                <div class="answer-area">
                    <input type="text" id="answerInput" placeholder="—Ç–≤–æ–π –æ—Ç–≤–µ—Ç..." autocomplete="off">
                    <button class="save-btn" id="saveAnswerBtn" title="—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç (–≥–∞–ª–æ—á–∫–∞)">‚úì</button>
                </div>
                <div class="small-note" id="saveHint">üëâ –Ω–∞–∂–º–∏ –≥–∞–ª–æ—á–∫—É, —á—Ç–æ–±—ã –æ—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è</div>
            </div>

            <div class="nav-buttons">
                <!-- –¢–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ "–≤–ø–µ—Ä—ë–¥" -->
                <button class="nav-btn" id="nextBtn"><span class="arrow">‚Üí</span> –≤–ø–µ—Ä—ë–¥</button>
            </div>
            <div class="pagination-info" id="paginationText"></div>
            <!-- –ö–Ω–æ–ø–∫–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –£–î–ê–õ–ï–ù–ê -->
        </div>

        <!-- –≠–ö–†–ê–ù –†–ï–ó–£–õ–¨–¢–ê–¢–û–í (—Å–∫—Ä—ã—Ç –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ) -->
        <div id="resultScreen" class="hidden">
            <div class="results-screen">
                <h2 style="color:#692f0b; text-align:center;">üçØ —Ç–≤–æ–∏ –±–ª–∏–Ω—ã üçØ</h2>
                <div class="result-stats">
                    <div class="stat-card">
                        <div>–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö</div>
                        <div class="big-number" id="correctCount">0</div>
                        <div>–∏–∑ 7</div>
                    </div>
                    <div class="stat-card">
                        <div>–≤—Ä–µ–º—è (—Å–µ–∫)</div>
                        <div class="big-number" id="timeSpent">0</div>
                    </div>
                </div>
                <div style="display: flex; justify-content: center; gap: 30px; flex-wrap: wrap;">
                    <div><span class="pancake-badge" id="pancakesTime">0</span> ü•û –∑–∞ –≤—Ä–µ–º—è</div>
                    <div><span class="pancake-badge" id="pancakesCorrect">0</span> ü•û –∑–∞ –æ—Ç–≤–µ—Ç—ã</div>
                </div>
                <div class="footer-pancakes" id="totalPancakes">–∏—Ç–æ–≥–æ: 0 –±–ª–∏–Ω–æ–≤ ü•û</div>

                <div class="answers-review" id="answersReviewList"></div>

                <button class="restart-btn" id="restartBtn">üî• –ø—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ üî•</button>
            </div>
        </div>
    </div>

    <script>
        (function() {
            // ---------- –±–∞–∑–∞ –∑–∞–≥–∞–¥–æ–∫ –∏ –ª–∏–±–µ—Ä–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (–≤—Å—ë –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ —É–≥–æ–¥–Ω–æ) ----------
            const riddles = [
                {
                    text: "–û–≥–Ω—ë–º –µ—ë –∫–æ—Ä—á—É—é—Ç, –¥—ã–º–æ–º –Ω–µ–±–æ —á—É—é—Ç, –í —Ä–µ–∫–µ —Ç–æ–ø—è—Ç –æ—Å—Ç–∞–Ω–∫–∏, —á—Ç–æ–± –∂–∏—Ç—å –±–µ–∑ –æ—Å–∞–¥–∫–∞. –ö—Ç–æ –æ–Ω–∞, —á—Ç–æ —Å–Ω–∞—á–∞–ª–∞ —Å–∂–∏–≥–∞—é—Ç, –∞ –ø–æ—Ç–æ–º —Ö–æ—Ä–æ–Ω—è—Ç –≤ –≤–æ–¥–µ?",
                    keywords: ["—á—É—á–µ–ª–æ", "–º–∞—Å–ª–µ–Ω–∏—Ü", "—á—É—á–µ–ª–æ –º–∞—Å–ª–µ–Ω–∏—Ü—ã", "–∑–∏–º", "—á—É—á–µ–ª–æ –∑–∏–º—ã"]
                },
                {
                    text: "–°–µ–º—å —Å–µ—Å—Ç—ë—Ä –∫ –æ–¥–Ω–æ–π –ø–µ—á–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç. –ü–µ—Ä–≤–∞—è ‚Äî –¥–ª—è –≤—Å—Ç—Ä–µ—á–∏, –í—Ç–æ—Ä–∞—è ‚Äî –¥–ª—è –∑–∞–∏–≥—Ä—ã—à–∞, –¢—Ä–µ—Ç—å—è ‚Äî –∫ —Å–ª–∞–¥–∫–æ–º—É —Å—Ç–æ–ª—É, –ß–µ—Ç–≤—ë—Ä—Ç–∞—è ‚Äî –∫ —à–∏—Ä–æ–∫–æ–º—É —Ä–∞–∑–≥—É–ª—É, –ü—è—Ç–∞—è ‚Äî –∫ —Ç—ë—â–µ –Ω–∞ –±–ª–∏–Ω—ã, –®–µ—Å—Ç–∞—è ‚Äî –∫ –∑–æ–ª–æ–≤–∫–µ –Ω–∞ –ø–æ—Å–∏–¥–µ–ª–∫–∏, –∞ –°–µ–¥—å–º–∞—è ‚Äî —Å–∞–º–∞—è –º–æ–ª—á–∞–ª–∏–≤–∞—è, –≤—Å–µ–º –ø—Ä–æ—â–µ–Ω–∏—è –ø—Ä–æ—Å–∏—Ç. –ß—Ç–æ –∑–∞ —Å–æ–±—ã—Ç–∏–µ, —Ä–∞–∑ —Å–µ—Å—Ç—Ä—ã —Å–æ–±—Ä–∞–ª–∏—Å—å?",
                    keywords: ["–º–∞—Å–ª–µ–Ω–∏—á–Ω–∞—è –Ω–µ–¥–µ–ª—è", "–Ω–µ–¥–µ–ª—è", "–º–∞—Å–ª–µ–Ω–∏—Ü", "—Å—ã—Ä–Ω–∞—è", "–º–∞—Å–ª–µ–Ω–∏—á–Ω–∞—è"]
                },
                {
                    text: "–ñ–∏–¥–∫–æ–µ, –∞ –ª–µ–ø—è—Ç. –ì–æ—Ä—è—á–µ–µ, –∞ –≤ —Ä–æ—Ç –ø—Ä–æ—Å—è—Ç. –ö—Ä—É–≥–ª–æ–µ, –∞ –≤–Ω—É—Ç—Ä–∏ –≤—Å—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è: –∏ –º–µ–¥, –∏ –∏–∫—Ä–∞, –∏ —Å–º–µ—Ç–∞–Ω–∞, –∏ –¥–∞–∂–µ —Å–º–µ—Ä—Ç—å (–¥–ª—è –∑–∏–º—ã). –ß—Ç–æ —ç—Ç–æ, –µ—Å–ª–∏ –æ–Ω–æ —Ä–æ–¥–∏–ª–æ—Å—å –∏–∑ –≤–æ–¥—ã, –º—É–∫–∏ –∏ —è–π—Ü–∞?",
                    keywords: ["—Ç–µ—Å—Ç–æ", "–±–ª–∏–Ω–Ω–æ–µ —Ç–µ—Å—Ç–æ", "—Ç–µ—Å—Ç–æ –¥–ª—è –±–ª–∏–Ω–æ–≤", "–±–ª–∏–Ω", "–æ–ø–∞—Ä–∞"]
                },
                {
                    text: "–ù–µ —à–∫–æ–ª–∞, –∞ —É—á–∏—Ç. –ù–µ —Å–≤–µ–∫—Ä–æ–≤—å, –∞ –∑—è—Ç—è –ø–µ—Å—Ç—É–µ—Ç. –ù–µ –∫–Ω–∏–≥–∞, –∞ —Ä–µ—Ü–µ–ø—Ç—ã —Ö—Ä–∞–Ω–∏—Ç. –í —Å—Ä–µ–¥—É –æ–Ω–∞ –µ–≥–æ –∫–æ—Ä–º–∏—Ç, –≤ –ø—è—Ç–Ω–∏—Ü—É –æ–Ω –µ—ë –∂–¥–µ—Ç. –ö—Ç–æ –æ–Ω–∞, –µ—Å–ª–∏ –±–µ–∑ –Ω–µ—ë –ú–∞—Å–ª–µ–Ω–∏—Ü–∞ ‚Äî –Ω–µ –ú–∞—Å–ª–µ–Ω–∏—Ü–∞, –∞ –∑—è—Ç—å ‚Äî —Å–∏—Ä–æ—Ç–∞?",
                    keywords: ["—Ç—ë—â–∞", "—Ç–µ—â–∞", "—Ç—ë—â–∞ –º–∞—Å–ª–µ–Ω–∏—á–Ω–∞—è"]
                },
                {
                    text: "–Ø ‚Äî —Å–∞–º—ã–π –≥–ª–∞–≤–Ω—ã–π –Ω–∞ —Å—Ç–æ–ª–µ, –Ω–æ –º–µ–Ω—è –Ω–∏–∫—Ç–æ –Ω–µ –µ—Å—Ç. –ú–µ–Ω—è –∫–ª–∞–¥—É—Ç –Ω–∞ –±–ª—é–¥–æ, –Ω–æ —è –Ω–µ –¥–ª—è –≥–æ—Å—Ç–µ–π. –ú–µ–Ω—è –≤—ã–Ω–æ—Å—è—Ç –∏–∑ –¥–æ–º–∞, —á—Ç–æ–±—ã –æ—Ç–¥–∞—Ç—å –≤–µ—Ç—Ä—É –∏ –ø—Ç–∏—Ü–∞–º. –ö—Ç–æ —è, –µ—Å–ª–∏ —è ‚Äî –ø–∞–º—è—Ç—å –æ –ø—Ä–µ–¥–∫–∞—Ö –∏ –∑–∞–¥–∞–±—Ä–∏–≤–∞–Ω–∏–µ –¥—É—Ö–æ–≤?",
                    keywords: ["–ø–µ—Ä–≤—ã–π –±–ª–∏–Ω", "–±–ª–∏–Ω", "–ø–µ—Ä–≤—ã–π –±–ª–∏–Ω –∫–æ–º–æ–º"]
                },
                {
                    text: "–ö–æ—Å–æ–ª–∞–ø—ã–π –≥–æ—Å—Ç—å –Ω–∞ –ú–∞—Å–ª–µ–Ω–∏—Ü—É –Ω–µ–∑–≤–∞–Ω—ã–º –ø—Ä–∏—Ö–æ–¥–∏—Ç, –Ω–æ –µ–≥–æ –∂–¥—É—Ç. –û–Ω –Ω–µ –µ—Å—Ç –±–ª–∏–Ω—ã, –Ω–æ –ª—é–±–∏—Ç, –∫–æ–≥–¥–∞ –µ–≥–æ –¥—Ä–∞–∑–Ω—è—Ç. –û–Ω –Ω–µ —Ç–∞–Ω—Ü—É–µ—Ç, –Ω–æ –µ–≥–æ –∑–∞—Å—Ç–∞–≤–ª—è—é—Ç. –ö—Ç–æ —ç—Ç–æ, –µ—Å–ª–∏ –µ–≥–æ —Ä–æ–ª—å –∏—Å–ø–æ–ª–Ω—è–ª —Ä—è–∂–µ–Ω—ã–π –º—É–∂–∏–∫ –≤ –≤—ã–≤–µ—Ä–Ω—É—Ç–æ–º —Ç—É–ª—É–ø–µ?",
                    keywords: ["–º–µ–¥–≤–µ–¥—å", "–º–∏—à–∫–∞", "–∫–æ—Å–æ–ª–∞–ø—ã–π"]
                },
                {
                    text: "–ù–µ –ª–æ—à–∞–¥—å, –∞ —Å –≥–æ—Ä—ã –≤–µ–∑–µ—Ç. –ù–µ —Å–∞–Ω–∏, –∞ –ø–æ–ª–æ–∑—å—è –µ—Å—Ç—å. –ù–µ –ø—Ç–∏—Ü–∞, –∞ –ª–µ—Ç–∏—Ç. –ö—Ç–æ –Ω–∞ –Ω–µ–π —Å—è–¥–µ—Ç ‚Äî —Ç–æ—Ç –≥–æ–¥ —Å—á–∞—Å—Ç–ª–∏–≤—ã–º –±—É–¥–µ—Ç, –∞ –∫—Ç–æ —É–ø–∞–¥–µ—Ç ‚Äî —Ç–æ–º—É —Å–Ω–µ–≥–∞ –≤ —Ä–æ—Ç. –ß—Ç–æ –∑–∞ –º–∞—Å–ª–µ–Ω–∏—á–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç?",
                    keywords: ["–ª–µ–¥—è–Ω–∫–∞", "—Å–∞–Ω–∫–∏", "–ª–µ–¥—è–Ω–∞", "–∫–∞—Ç—É–ª—å–∫–∞"]
                }
            ];

            // –ª–∏–±–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –≤–∫–ª—é—á–∞–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ (—Ä–µ–≥–∏—Å—Ç—Ä –Ω–µ –≤–∞–∂–µ–Ω)
            function isAnswerCorrect(userAnswer, keywords) {
                if (!userAnswer || userAnswer.trim() === '') return false;
                const lowerAnswer = userAnswer.trim().toLowerCase().replace(/\s+/g, ' ');
                for (let kw of keywords) {
                    if (lowerAnswer.includes(kw.toLowerCase())) return true;
                }
                return false;
            }

            // --- —Å–æ—Å—Ç–æ—è–Ω–∏–µ ---
            let currentIndex = 0;                     // 0-6
            let userAnswers = new Array(7).fill('');  // —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
            let answeredCorrect = new Array(7).fill(null); // true/false/null –µ—Å–ª–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ

            let timerInterval = null;
            let seconds = 0;
            let quizActive = true;          // —Ç–∞–π–º–µ—Ä —Å—á–∏—Ç–∞–µ—Ç –¥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
            let finished = false;

            // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
            const quizScreen = document.getElementById('quizScreen');
            const resultScreen = document.getElementById('resultScreen');
            const questionText = document.getElementById('questionText');
            const answerInput = document.getElementById('answerInput');
            const saveBtn = document.getElementById('saveAnswerBtn');
            const nextBtn = document.getElementById('nextBtn');
            const currentIdxSpan = document.getElementById('currentIdxSpan');
            const paginationText = document.getElementById('paginationText');
            const timerDisplay = document.getElementById('timerDisplay');
            // –ö–Ω–æ–ø–∫–∞ "–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º" –±–æ–ª—å—à–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

            // —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            const correctCountSpan = document.getElementById('correctCount');
            const timeSpentSpan = document.getElementById('timeSpent');
            const pancakesTimeSpan = document.getElementById('pancakesTime');
            const pancakesCorrectSpan = document.getElementById('pancakesCorrect');
            const totalPancakesSpan = document.getElementById('totalPancakes');
            const answersReviewList = document.getElementById('answersReviewList');
            const restartBtn = document.getElementById('restartBtn');

            // ---- —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–∞–π–º–µ—Ä–∞ ----
            function startTimer() {
                if (timerInterval) clearInterval(timerInterval);
                timerInterval = setInterval(() => {
                    if (quizActive && !finished) {
                        seconds++;
                        updateTimerDisplay();
                    }
                }, 1000);
            }
            function updateTimerDisplay() {
                timerDisplay.textContent = seconds.toString().padStart(2, '0');
            }
            function stopTimer() {
                quizActive = false;
                if (timerInterval) clearInterval(timerInterval);
                timerInterval = null;
            }

            // ---- –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ ----
            function renderQuestion() {
                if (finished) return;
                const riddle = riddles[currentIndex];
                questionText.textContent = riddle.text;
                currentIdxSpan.textContent = (currentIndex + 1);
                paginationText.textContent = `–≤–æ–ø—Ä–æ—Å ${currentIndex+1} –∏–∑ 7`;

                // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç, –µ—Å–ª–∏ –µ—Å—Ç—å
                answerInput.value = userAnswers[currentIndex] || '';

                // –õ–û–ì–ò–ö–ê: –ø–µ—Ä–µ—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–∞–∂–∞—Ç save –∏ –æ—Ç–≤–µ—Ç –∑–∞–ø–∏—Å–∞–Ω
                const isCurrentSaved = userAnswers[currentIndex] !== '';
                
                // –¥–ª—è next - –µ—Å–ª–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω –∏–ª–∏ —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ–ø—Ä–æ—Å, —Ç–æ –¥–∏–∑–µ–π–±–ª–∏–º
                if (currentIndex === 6) {
                    nextBtn.disabled = true; // –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –≤–æ–ø—Ä–æ—Å–µ –∫–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
                } else {
                    nextBtn.disabled = !isCurrentSaved;
                }
            }

            // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –≤—Å–µ –ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–º–µ—é—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
            function allQuestionsAnswered() {
                return userAnswers.every(answer => answer !== '');
            }

            // –ü–æ–¥—Å—á–µ—Ç —Ñ–∏–Ω–∞–ª–∞ –∏ –ø–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            function finishQuiz() {
                if (finished) return;
                stopTimer();
                quizActive = false;
                finished = true;

                // –ø–æ–¥—Å—á–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö
                let correctCount = 0;
                for (let i = 0; i < 7; i++) {
                    if (userAnswers[i] !== '' && isAnswerCorrect(userAnswers[i], riddles[i].keywords)) {
                        correctCount++;
                        answeredCorrect[i] = true;
                    } else {
                        answeredCorrect[i] = false;  // –Ω–µ–≤–µ—Ä–Ω–æ –∏–ª–∏ –ø—É—Å—Ç–æ
                    }
                }

                // –±–ª–∏–Ω—á–∏–∫–∏ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
                const correctBonuses = [0, 3, 5, 6, 7, 8, 9, 10]; // –∏–Ω–¥–µ–∫—Å = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö (–æ—Ç 0 –¥–æ 7)
                const pancakesFromCorrect = correctBonuses[correctCount] || 0;

                // –±–ª–∏–Ω—á–∏–∫–∏ –∑–∞ –≤—Ä–µ–º—è (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞)
                let timeBonus = 0;
                if (seconds <= 25) timeBonus = 10;
                else if (seconds <= 39) timeBonus = 8;
                else if (seconds <= 60) timeBonus = 7;
                else if (seconds <= 99) timeBonus = 6;
                else if (seconds <= 130) timeBonus = 5;
                else if (seconds <= 170) timeBonus = 4;
                else timeBonus = 3;

                const total = pancakesFromCorrect + timeBonus;

                // –≤—ã–≤–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω (—É–±—Ä–∞–Ω–∞ –Ω–∞–¥–ø–∏—Å—å "–≤ —Å–∫–æ–±–∫–∞—Ö")
                correctCountSpan.textContent = correctCount;
                timeSpentSpan.textContent = seconds;
                pancakesTimeSpan.textContent = timeBonus;
                pancakesCorrectSpan.textContent = pancakesFromCorrect;
                totalPancakesSpan.innerHTML = `–∏—Ç–æ–≥–æ: ${total} –±–ª–∏–Ω–æ–≤ ü•û`;

                // –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–≤—å—é
                let reviewHtml = '';
                riddles.forEach((r, idx) => {
                    const ans = userAnswers[idx] || '(–Ω–µ –æ—Ç–≤–µ—á–µ–Ω–æ)';
                    const isCor = answeredCorrect[idx];
                    reviewHtml += `<div class="review-item"><strong>${idx+1}.</strong> ${r.text.substring(0,50)}‚Ä¶ <br>‚ûú —Ç–≤–æ–π –æ—Ç–≤–µ—Ç: "${ans}" ‚Äî <span class="${isCor ? 'correct-badge' : 'wrong-badge'}">${isCor ? '‚úì –≤–µ—Ä–Ω–æ' : '‚úó –Ω–µ–≤–µ—Ä–Ω–æ'}</span></div>`;
                });
                answersReviewList.innerHTML = reviewHtml;

                // –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —ç–∫—Ä–∞–Ω—ã
                quizScreen.classList.add('hidden');
                resultScreen.classList.remove('hidden');
            }

            // –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–≥–∞–ª–æ—á–∫–∞)
            function saveCurrentAnswer() {
                const answer = answerInput.value.trim();
                userAnswers[currentIndex] = answer; // –¥–∞–∂–µ –ø—É—Å—Ç–æ–π —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∫ —Å—Ç—Ä–æ–∫—É (—á—Ç–æ–±—ã —Å—á–∏—Ç–∞–ª–æ—Å—å "–æ—Ç–≤–µ—Ç –¥–∞–ª")
                // –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å
                const correct = isAnswerCorrect(answer, riddles[currentIndex].keywords);
                answeredCorrect[currentIndex] = correct;

                // –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                renderQuestion();  // –æ–±–Ω–æ–≤–∏—Ç disabled —Å —É—á—ë—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ
                
                // –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
                document.getElementById('saveHint').innerHTML = '‚úÖ –æ—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω';
                setTimeout(() => {
                    if (!finished) document.getElementById('saveHint').innerHTML = 'üëâ –Ω–∞–∂–º–∏ –≥–∞–ª–æ—á–∫—É, —á—Ç–æ–±—ã –æ—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è';
                }, 1500);

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Ç–≤–µ—Ç–∏–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ –≤—Å–µ 7 –≤–æ–ø—Ä–æ—Å–æ–≤
                if (allQuestionsAnswered()) {
                    finishQuiz(); // –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                }
            }

            // –ø–µ—Ä–µ—Ö–æ–¥ –≤–ø–µ—Ä—ë–¥
            function goNext() {
                if (currentIndex < 6) {
                    currentIndex++;
                    renderQuestion();
                }
            }

            // restart
            function restartQuiz() {
                stopTimer();
                // —Å–±—Ä–æ—Å
                currentIndex = 0;
                userAnswers = new Array(7).fill('');
                answeredCorrect = new Array(7).fill(null);
                seconds = 0;
                quizActive = true;
                finished = false;
                updateTimerDisplay();
                startTimer();

                quizScreen.classList.remove('hidden');
                resultScreen.classList.add('hidden');
                renderQuestion();
                document.getElementById('saveHint').innerHTML = 'üëâ –Ω–∞–∂–º–∏ –≥–∞–ª–æ—á–∫—É, —á—Ç–æ–±—ã –æ—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è';
                answerInput.value = '';
            }

            // ---- –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ ----
            saveBtn.addEventListener('click', function() {
                saveCurrentAnswer();
            });

            nextBtn.addEventListener('click', goNext);

            restartBtn.addEventListener('click', function() {
                restartQuiz();
            });

            // –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –µ—Å–ª–∏ –Ω–∞–∂–∞—Ç—å Enter –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ - —Å–æ—Ö—Ä–∞–Ω—è—Ç—å
            answerInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    saveCurrentAnswer();
                }
            });

            // –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            renderQuestion();
            startTimer();
        })();
    </script>
</body>
</html>
