<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>HOLD 100K</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
    user-select: none;
    -webkit-user-select: none;
    -webkit-tap-highlight-color: transparent;
}

body {
    margin: 0;
    font-family: system-ui, -apple-system, Arial, sans-serif;
    background: linear-gradient(180deg,#7dd3fc,#e0f2fe);
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    transition: background 0.6s;
}

/* ===== –û–ë–£–ß–ï–ù–ò–ï ===== */
#tutorial {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.88);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    text-align: center;
    padding: 30px;
}
#tutorialBox {
    max-width: 520px;
}
#tutorialBox h2 {
    font-size: 30px;
    margin-bottom: 20px;
}
#tutorialBox p {
    line-height: 1.6;
    opacity: 0.85;
}
#tutorialBox span {
    display: block;
    margin-top: 25px;
    font-size: 14px;
    opacity: 0.6;
}

/* ===== –ò–ì–†–ê ===== */
#seal {
    font-size: 120px;
    margin-bottom: 10px;
}

.breath { animation: breath 2s infinite ease-in-out; }
.angry  { animation: angry 0.35s infinite; }
.happy  { animation: happy 1.5s infinite ease-in-out; }

@keyframes breath {
    0%,100%{transform:scale(1)}
    50%{transform:scale(1.05)}
}
@keyframes angry {
    0%{transform:translateX(0)}
    25%{transform:translateX(-8px)}
    50%{transform:translateX(8px)}
    75%{transform:translateX(-8px)}
    100%{transform:translateX(0)}
}
@keyframes happy {
    0%,100%{transform:rotate(0)}
    50%{transform:rotate(10deg)}
}

#scoreBox {
    background: #000;
    padding: 18px 36px 10px;
    border-radius: 22px;
    font-size: 44px;
    font-weight: bold;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}
#target {
    font-size: 14px;
    opacity: 0.6;
    margin-top: 6px;
}

#attempts {
    margin: 14px 0 22px;
    font-size: 14px;
    opacity: 0.8;
}

#holdBtn {
    width: 300px;
    height: 300px;
    border-radius: 50%;
    background: radial-gradient(circle at top,#ff6b6b,#b91c1c);
    border: none;
    box-shadow:
        0 0 50px rgba(255,0,0,0.7),
        inset 0 -15px 25px rgba(0,0,0,0.4);
    cursor: pointer;
    touch-action: none;
}
#holdBtn:active { transform: scale(0.95); }
</style>
</head>

<body>

<!-- –û–ë–£–ß–ï–ù–ò–ï -->
<div id="tutorial">
    <div id="tutorialBox">
        <h2>ü¶≠ –ò—Å–ø—ã—Ç–∞–Ω–∏–µ —Ç—é–ª–µ–Ω—è</h2>
        <p>
            –ó–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –∏ –¥–µ—Ä–∂–∏, –ø–æ–∫–∞ —Å—á—ë—Ç –Ω–µ –¥–æ–π–¥—ë—Ç –¥–æ 100 000.<br><br>
            ‚ùå –û—Ç–ø—É—Å—Ç–∏–ª ‚Äî –ø–æ–ø—ã—Ç–∫–∞ –ø–æ—Ç–µ—Ä—è–Ω–∞<br>
            üö´ –í—Å–µ–≥–æ 5 –ø–æ–ø—ã—Ç–æ–∫<br>
            üîí –ü–æ—Å–ª–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–µ—Ç
        </p>
        <span>–ù–∞–∂–º–∏ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å</span>
    </div>
</div>

<!-- –ò–ì–†–ê -->
<div id="seal">ü¶≠</div>

<div id="scoreBox">
    <div id="score">0.0</div>
    <div id="target">/ 100 000</div>
</div>

<div id="attempts"></div>

<button id="holdBtn"></button>

<script>
const TARGET = 100000;
const MAX_ATTEMPTS = 5;

let score = 0;
let interval = null;
let lastTime = null;

let attempts = Number(localStorage.getItem("attempts") ?? 0);
let locked = localStorage.getItem("locked") === "true";

const seal = document.getElementById("seal");
const scoreEl = document.getElementById("score");
const attemptsEl = document.getElementById("attempts");
const btn = document.getElementById("holdBtn");
const tutorial = document.getElementById("tutorial");

/* ===== –û–ë–£–ß–ï–ù–ò–ï (–û–î–ò–ù –†–ê–ó) ===== */
if (localStorage.getItem("tutorialDone") === "true") {
    tutorial.remove();
}
tutorial.addEventListener("click", () => {
    localStorage.setItem("tutorialDone","true");
    tutorial.remove();
});

/* ===== –ò–ù–ò–¶ ===== */
updateAttempts();
if (locked) lockForever();

/* ===== –õ–û–ì–ò–ö–ê ===== */
function updateAttempts() {
    attemptsEl.textContent = `–ü–æ–ø—ã—Ç–∫–∏: ${MAX_ATTEMPTS - attempts} / ${MAX_ATTEMPTS}`;
}

function updateTheme() {
    if (score < 20000)
        document.body.style.background = "linear-gradient(180deg,#7dd3fc,#e0f2fe)";
    else if (score < 50000)
        document.body.style.background = "linear-gradient(180deg,#22c55e,#16a34a)";
    else
        document.body.style.background = "linear-gradient(180deg,#ef4444,#7f1d1d)";
}

function startCounting() {
    if (interval || locked) return;

    lastTime = performance.now();
    seal.textContent = "üòêü¶≠";
    seal.className = "breath";

    interval = setInterval(() => {
        const now = performance.now();
        if (now - lastTime > 60) return fail();

        lastTime = now;
        score += 0.1;
        scoreEl.textContent = score.toFixed(1);
        updateTheme();

        if (score >= TARGET) win();
    }, 1);
}

function fail() {
    clearInterval(interval);
    interval = null;

    score = 0;
    scoreEl.textContent = "0.0";

    attempts++;
    localStorage.setItem("attempts", attempts);

    seal.textContent = "üò°ü¶≠";
    seal.className = "angry";
    navigator.vibrate?.([200,100,200]);

    updateAttempts();

    if (attempts >= MAX_ATTEMPTS) {
        lockForever();
    }
}

function win() {
    clearInterval(interval);
    seal.textContent = "üòéü¶≠";
    seal.className = "happy";
    alert("ü¶≠ 100 000. –¢—ã –≤—ã–¥–µ—Ä–∂–∞–ª.");
}

function lockForever() {
    locked = true;
    localStorage.setItem("locked","true");

    document.body.innerHTML = `
        <div style="text-align:center">
            <div style="font-size:120px">üîí</div>
            <div style="font-size:24px;margin-top:20px">
                –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞–≤—Å–µ–≥–¥–∞
            </div>
        </div>
    `;
}

function stopCounting() {
    if (interval) fail();
}

/* ===== –°–û–ë–´–¢–ò–Ø ===== */
btn.addEventListener("mousedown", startCounting);
btn.addEventListener("mouseup", stopCounting);
btn.addEventListener("mouseleave", stopCounting);
btn.addEventListener("touchstart", startCounting);
btn.addEventListener("touchend", stopCounting);

document.addEventListener("visibilitychange", () => {
    if (document.hidden && interval) fail();
});
window.addEventListener("blur", () => {
    if (interval) fail();
});
</script>

</body>
</html>
